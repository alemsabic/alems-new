"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addTwitterMeta = void 0;
var sdh_1 = require("@connectv/sdh");
var URLRegex = /^http(s)\:\/\//;
function addTwitterMeta() {
    var renderer = new sdh_1.StaticRenderer();
    return function (html) {
        var title$ = html.head.querySelector('title');
        var desc$ = html.head.querySelector('meta[name="description"]');
        if (title$ && !html.head.querySelector('meta[name="twitter:title"]')) {
            renderer.render(renderer.create("meta", { name: "twitter:title", content: title$.textContent || '' })).on(html.head);
        }
        if (desc$ && !html.head.querySelector('meta[name="twitter:description"]')) {
            renderer.render(renderer.create("meta", { name: "twitter:description", content: desc$.getAttribute('content') || '' })).on(html.head);
        }
        if (!html.head.querySelector('meta[name="twitter:image"]')) {
            var container$ = html.body.querySelector('#-codedoc-container');
            if (container$) {
                var img$_1 = undefined;
                container$.querySelectorAll('img[data-hero]').forEach(function (hero$) {
                    if (!img$_1 && URLRegex.test(hero$.getAttribute('src') || '')) {
                        img$_1 = hero$;
                    }
                });
                if (!img$_1) {
                    container$.querySelectorAll('img').forEach(function (hero$) {
                        if (!img$_1 && URLRegex.test(hero$.getAttribute('src') || '')) {
                            img$_1 = hero$;
                        }
                    });
                }
                if (img$_1) {
                    var src = img$_1.getAttribute('src') || '';
                    renderer.render(renderer.create("meta", { name: "twitter:image", content: src })).on(html.head);
                }
            }
        }
    };
}
exports.addTwitterMeta = addTwitterMeta;
//# sourceMappingURL=twitter-info.js.map